<!-- Top bar -->
<nav class="navbar navbar-expand topbar mb-4 static-top float-right m-2">

    <div class="dropdown show">
        <a class="btn dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
           data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Setting
        </a>

        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
            <a class="dropdown-item" href="#" data-toggle="modal" data-target="#updateProfileModel">Update Profile</a>
            <a class="dropdown-item" href="#" data-toggle="modal" data-target="#changePasswordModel">Change Password</a>
            <a class="dropdown-item" href="{{ path('app_logout') }}" id="logout">Logout</a>
        </div>
    </div>
</nav>

<!-- Update Profile Modal -->
<div class="modal fade" id="updateProfileModel" tabindex="-1" role="dialog" aria-labelledby="updateProfileModel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Update Profile</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form class="user" action="{{ path('app_update_profile') }}" method="post">
                    <div class="form-group row">
                        <div class="col-sm-6 mb-3 mb-sm-0">
                            <input type="text" class="form-control form-control-user" id="update_fname"
                                   name="update_fname"
                                   placeholder="First Name" value="{{ app.user.firstName }}">
                        </div>
                        <div class="col-sm-6">
                            <input type="text" class="form-control form-control-user" id="update_lname"
                                   name="update_lname"
                                   placeholder="Last Name" value="{{ app.user.lastName }}">
                        </div>
                    </div>
                    <div class="form-group">
                        <input type="email" class="form-control form-control-user" id="update_email" name="update_email"
                               placeholder="Email Address" value="{{ app.user.email }}">
                    </div>

                    <div class="form-check form-switch ml-2">
                        <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckChecked" name="update_totp" {{ app.user.enforceOtp ? "Checked" : '' }}>
                        <label class="form-check-label" for="update_totp">TOTP Setting</label>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Update</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Change Password Modal -->
<div class="modal fade" id="changePasswordModel" tabindex="-1" role="dialog" aria-labelledby="changePasswordModel"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Change Password</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <span id="message" class="text-warning ml-4 mt-2"></span>
            <div class="modal-body">
                <form class="user" id="changePasswordForm">
                    <div class="form-group">
                        <input type="number" class="form-control form-control-user" id="change_otp_code"
                               name="change_totp_code"
                               placeholder="Enter TOTP">
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-6 mb-3 mb-sm-0">
                            <input type="password" class="form-control form-control-user"
                                   id="change_new_password" name="change_new_password" placeholder="New Password">
                        </div>
                        <div class="col-sm-6">
                            <input type="password" class="form-control form-control-user"
                                   id="change_new_cpassword" name="change_new_cpassword"
                                   placeholder="Repeat New Password">
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-6 mb-3 mb-sm-0 code_info">
                            <label for="change_code">Enter Code :</label><input type="text"
                                                                                class="form-control form-control-user"
                                                                                id="change_code" name="change_code"
                                                                                placeholder="6 Digit Code">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal" id="change_close">Close
                        </button>
                        <button type="button" class="btn btn-primary" id="changePasswordBtn">Change Password</button>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>